const hre = require("hardhat");

async function main() {
  const Boomerang = await hre.ethers.getContractFactory("Boomerang");
  const boomerang = await Boomerang.deploy(
    "0x7A95fA73250dc53556d264522150A940d4C50238", // gsn forwarder
    "0x13093E05Eb890dfA6DacecBdE51d24DabAb2Faa1", // stargate router
    "0x212A827f666bdfdebbBF68EE6F6Ca19b4D05128C"  // abacus x-chain account router
    );                                            // all on fuji testnet

  await boomerang.deployed();
  console.log(`Boomerang contract deployed to ${boomerang.address}`);

  // USDC on fuji 0x4A0D1092E9df255cf95D72834Ea9255132782318
  const usdc = "0x4A0D1092E9df255cf95D72834Ea9255132782318"; 

  IERC20_ABI = [{"constant":false,"inputs":[{"name":"_spender","type":"address"},{"name":"_value","type":"uint256"}],"name":"approve","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"}]
  const wavax = new hre.ethers.Contract(usdc, IERC20_ABI, (await hre.ethers.getSigners())[0]);
  const tx = await wavax.approve(boomerang.address, "10000000000000000000000000000");
  await tx.wait();
  console.log("Approved boomerang contract to spend our usdc tokens");

  await boomerang.boom("0x68b3465833fb72a70ecdf485e0e4c7bd8665fc45", "0x5ae401dc00000000000000000000000000000000000000000000000000000006a6a8e5f000000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000001a00000000000000000000000000000000000000000000000000000000000000124b858183f0000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000008000000000000000000000000086c01dd169ae6f3523d1919cc46bc224e733127f00000000000000000000000000000000000000000000000000000000000b71b0000000000000000000000000000000000000000000000000000000214176870b0000000000000000000000000000000000000000000000000000000000000042742dfa5aa70a8212857966d491d67b09ce7d6ec7000bb89c3c9283d3e44854697cd22d3faa240cfb032889000bb8a6fa4fb5f76172d178d61b04b0ecd319c5d1c0aa0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000e404e45aaf000000000000000000000000742dfa5aa70a8212857966d491d67b09ce7d6ec7000000000000000000000000a6fa4fb5f76172d178d61b04b0ecd319c5d1c0aa00000000000000000000000000000000000000000000000000000000000001f400000000000000000000000086c01dd169ae6f3523d1919cc46bc224e733127f000000000000000000000000000000000000000000000000000000000003d0900000000000000000000000000000000000000000000000000000e218b986211c000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000", usdc, "100000000", {value : "300000000000000000"});
  // console.log("Bridged");

}

main().catch((error) => {
  console.error(error);
  process.exitCode = 1;
});
